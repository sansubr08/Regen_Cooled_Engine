# Regen_Cooled_Engine
Heat transfer calcs for Regen Cooled Engine 
TDK - RTE model

(NASA's Rocket Thermal Evaluation +  TDK (Two Dimensional Kinetics Nozzle Performance Computer Program)

https://arc.aiaa.org/doi/epdf/10.2514/6.2004-3852 (link to paper inspo)

https://tara-technologies.com/rte/rte.html (NASA's Rocket Thermal Evaluation +  TDK (Two Dimensional Kinetics Nozzle Performance Computer Program) - hot gas side heat flux calculation

This is how I installed the FORTRAN code : https://tara-technologies.com/rte/rte.pdf

Accurately predict the coolant pressure and temperature at various locations. 

WHAT DOES MY CODE DO : 

The output of the code would be a plot showing the temperature distribution along the axial location of the combustion chamber. This plot would display both the temperature of the gas inside the chamber and the temperature of the chamber wall as they vary along the axial direction.

The x-axis of the plot represents the normalized axial location (ranging from 0 to 1) along the length of the combustion chamber. The y-axis represents the temperature in degrees Celsius.
In this plot, you would see two lines representing the gas temperature and the wall temperature. The gas temperature line shows how the temperature of the combustion gases changes along the axial length of the chamber. The wall temperature line shows how the temperature of the chamber wall changes due to the heat transfer between the gas and the wall and the cooling process. The temperatures may change over multiple iterations until convergence is achieved.

the actual shape and behavior of the plot will depend on the specifics of simulation, the geometry of combustion chamber, the properties of the coolant and combustion gases, and other factors relevant to engine design.

More on axial location:
the axial location can be related to the distance along the engine's axis. The axial direction is the direction parallel to the engine's central axis, typically from the engine's inlet to its outlet.

think of the axial location as the distance traveled along the length of the engine or chamber. The normalized axial location ranges from 0 to 1, where 0 corresponds to the inlet or starting point of the engine, and 1 corresponds to the outlet or end point of the engine.

Here's how you to relate the normalized axial location to distance:

Normalized Axial Location (0 to 1): This is a unitless value representing the position along the engine's axis. 0 corresponds to the starting point, and 1 corresponds to the ending point.

Distance (meters, inches, etc.): To relate the normalized axial location to a physical distance, you can multiply it by the total length of the engine. If L is the total length of the engine, then the distance d corresponding to a normalized axial location x can be calculated as:

d=L* x

summary + takeaways from paper

1. The text describes a method for improving the accuracy and convergence speed of regenerative cooling simulations for rocket engines. This method involves using a lookup table of values called "StUeeρ" generated by a simulation tool called TDK. This lookup table helps in calculating heat flux distribution between the hot gas and the chamber wall more efficiently.
This new model uses TDK for hot-gas-side heat flux calculations and generates a linkage file containing a table of wall heat fluxes, wall enthalpy, adiabatic wall enthalpy, and StUeeρ at several wall temperatures at various axial locations.  Typically this table is produced for five uniform wall temperatures and it is generated by setting ‘RTE=.TRUE.’ in the TDK input file.  The RTE module subsequently reads the TDK linkage file and interpolates with wall temperature and axial location to evaluate the local wall heat flux.

2. Heat Flux Distribution:
The first figure in the text shows how heat is distributed along the engine's nozzle at different axial positions for various uniform wall temperatures. At the throat of the nozzle, the heat flux can vary by about 16% between the highest and lowest temperatures.

3. Introducing StUeeρ:
To make the simulation process faster and more accurate, a new variable called "StUeeρ" is introduced. This variable is related to the Stanton number, which is a measure of heat transfer. Using StUeeρ instead of wall heat flux helps reduce variations in the results when different wall temperatures are considered. (makes calculations more consistent)

4. Comparing Variables:
The text presents a comparison between using StUeeρ and wall heat flux. It shows that using StUeeρ reduces differences in results when extreme temperatures are considered. This means that using StUeeρ makes the simulation more stable and reliable.

5. Simulation Process:
The new simulation approach uses TDK to calculate heat flux on the hot gas side and generates a lookup table with StUeeρ values for different wall temperatures at various positions in the engine. This table is created by running TDK with a specific setting. The new simulation method reads this table and uses it to calculate the local wall heat flux.

6. Iterative Process:
The simulation involves iterations between calculating heat flux on the hot gas side and on the coolant side. This means that the simulation iterates to find a solution that is consistent and accurate.

7. Workflow:
A flowchart is provided to explain how TDK and the new method (RTE) interact. TDK is run with a setting to produce the StUeeρ lookup table. Then, RTE uses this table to calculate wall temperature distribution and coolant thermal properties. 

8. Practical Application:
In practical terms, this method streamlines the simulation process. TDK is run once to generate the StUeeρ table, which remains consistent unless major changes are made. If you want to refine the cooling system design (like changing channel dimensions or wall materials), you would only need to re-run RTE.

In summary, this approach improves regenerative cooling simulations by using a lookup table of StUeeρ values generated by TDK. This makes the simulation process faster, more reliable, and suitable for refining cooling circuit designs.  


ASSUMPTIONS THE CODE MAKES and things u need to replace: 

Number of Axial Locations (num_locations):

The number of axial locations represents how finely you want to discretize your combustion chamber or engine along its axial direction.

Uniform Wall Temperatures (T_wall_uniform):

These are the temperatures at which you want to analyze the heat flux distribution using the StUeeρ values - cover both nominal and extreme temp of engine.

Number of Temperatures (num_temperatures):

This is the number of temperature points for which you want to perform the heat flux calculations using the StUeeρ values.
It corresponds to the number of elements in the T_wall_uniform array.
A higher number of temperatures allows one to capture the variation in heat flux over a wider temperature range.

sources of error : understanding of TDK + structured writing using chatgpt

Running TDK:

Prepare your input file for TDK with the necessary settings. This includes specifying that you want to calculate the StUeeρ values using the 'RTE=.TRUE.' setting.
Run TDK using the input file you prepared. The exact command to run TDK depends on your system setup and the software you're using.
Accessing TDK's Output:

After running TDK, it should generate output files containing the StUeeρ values and other relevant information.
Look for output files that contain the StUeeρ lookup table. The filenames and file formats may vary based on TDK's documentation and the settings you used.
The StUeeρ lookup table is a collection of values that you'll use to interpolate heat flux values during your simulation.

code - 

import numpy as np
import matplotlib.pyplot as plt

num_locations = 100  # Number of axial locations 
num_temperatures = 5  # Number of wall temperatures 
T_wall_uniform = np.array([540, 750, 1000, 1250, 1500])  # Uniform wall temperatures in R
T_wall_uniform_K = T_wall_uniform * (5/9)  # Convert to K

stuee_data = np.random.rand(num_locations, num_temperatures)

interpolated_stuee = np.zeros((num_locations, num_temperatures))

for i in range(num_temperatures):
    interpolated_stuee[:, i] = np.interp(np.linspace(0, 1, num_locations), 
                                         np.linspace(0, 1, len(stuee_data)), stuee_data[:, i])


for i in range(num_temperatures):
    plt.plot(np.linspace(0, 1, num_locations), interpolated_stuee[:, i], label=f'Wall Temp: {T_wall_uniform[i]} K')

plt.xlabel('Normalized Axial Location')
plt.ylabel('Interpolated StUeeρ')
plt.title('Interpolated StUeeρ at Different Wall Temperatures')
plt.legend()
plt.grid(True)
plt.show()



WHAT DOES THE CODE DO : 
Generate StUeeρ Lookup Table:

Run TDK with 'RTE=.TRUE.' setting to generate the StUeeρ lookup table for different wall temperatures and axial locations.
The resulting table should include StUeeρ values at various points in the engine's nozzle.
Modify RTE Code:

Load the StUeeρ lookup table generated by TDK into your RTE code: 
During the simulation, interpolate the StUeeρ values based on the current axial location and wall temperature.
Use the interpolated StUeeρ values to calculate the local heat flux on the hot gas side.
Iterative Simulation:

Perform iterations between calculating hot gas-side heat flux (using StUeeρ) and coolant-side heat flux to achieve convergence.
Calculate wall temperatures and coolant thermal characteristics using the interpolated StUeeρ values.
